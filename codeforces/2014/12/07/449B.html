<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>449B</title>

    <!-- Bootstrap Core  -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <link href="/css/clean-blog.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.plate.js"></script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a href="/index.html" class="navbar-brand">
            Haifeng Jin's Blog
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/index.html">
                        Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/technology/index.html">
                        Technology
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/codeforces/index.html">
                        Competitive
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/chinese/index.html">
                        Chinese
                    </a>
                </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Contact
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="https://www.linkedin.com/in/HaifengJin">
                                Linkedin
                </a>
                <a class="dropdown-item" href="https://github.com/jhfjhfj1">
                                GitHub
                </a>
                <a class="dropdown-item" href="mailto:jin@tamu.edu">
                                E-mail
                </a>
                <a class="dropdown-item" href="https://www.facebook.com/people/Haifeng-Jin/100002510906960">
                                Facebook
                </a>
              </div>
            </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
              <input class="form-control mr-sm-2" type="search" onkeydown="if(event.keyCode==13) googlesearch();" name="search-key-words" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success my-2 my-sm-0" onclick="googlesearch()">Search</button>
            </form>
        </div>
</nav>
<script type="text/javascript">
    function googlesearch() {
    console.log('google call');
        var key = document.getElementsByName("search-key-words")[0].value;
        var link = "http://www.google.com/search?domains=haifengjin.com&sitesearch=haifengjin.com&q=" + key;
        window.open(link);
        document.getElementsByName("search-key-words")[0].value = ""
    }
</script>

    <div id="listener-contained" class="listener pointer">
<style>
</style>
<header class="intro-header" id="header" style="background-image: url('/img/codeforces.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="site-heading">

		<div id="plate-contained" class="plate">
                        <h1>Tutorial</h1>
                        <span class="subheading">The Art of Competitive Programming</span>
</div>

                    </div>
                </div>
            </div>
        </div>

</header>
    </div>
        <script>
            $('#listener-contained').plate({
                element: ['#plate-contained']
            });
        </script>

		    <div class="container">

    <div class="row">
            <!-- Blog Post Content Column -->
            <div class="col-lg-8">

                <!-- Blog Post -->

                <!-- Title -->

                <h2>449B</h2>
                <hr>

                <!-- Date/Time -->
		<div class="glyphicon glyphicon-time"></div>
		<span>
			&nbsp;
			Posted on 07 Dec 2014
		</span>

		<div class="float-right">
			
			<span class="badge badge-default">shortest path</span>
			
		</div>

                <hr>

                <!-- Post Content -->
		<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

		<div class="blog-content" >
		<h3 id="description">Description</h3>
<p><br />
The first node of a undirected graph is the capital,
whose edges are normal roads.
In addition, there are some train routes connecting the capital and other cities.
Output how many train routes can be closed without affecting the shortest distance between the capital and each city.
There are <script type="math/tex">n</script> cities (<script type="math/tex">1 \leq n \leq 10^5) and</script>m<script type="math/tex">roads (</script>1 \leq m \leq 3 \times 10^5).
<br /></p>

<h3 id="tutorial">Tutorial</h3>
<p><br />
We initially set the shortest distance to each city by its train route.
Then start the Dijkstra algorithm.
When updating the distance of a node, if the new distance is less than or equal to the original distance, it means that the train route to that node is not necessary (we find another shortest path other than the train route).</p>

<p>I learned how to define a graph by vector.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vector&lt;pair&lt;int, int&gt; &gt; edge[MAX_NODE_NUM];
edge[u].push_back(make_pair(v, w));
</code></pre></div></div>

<p>I also updated the template for Dijkstra.
<br /></p>

<h3 id="solution">Solution</h3>
<p><br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
using namespace std;

#define MAX_EDGE_NUM 300005 * 2
#define MAX_NODE_NUM 100005
#define INF (1LL &lt;&lt; 60)
#define D(x) 

int node_num, edge_num, route_num;
long long dist[MAX_NODE_NUM];
bool train[MAX_NODE_NUM];
vector&lt;pair&lt;int, int&gt; &gt; edge[MAX_NODE_NUM];

void input()
{
	scanf("%d%d", &amp;node_num, &amp;edge_num);
	scanf("%d", &amp;route_num);
	for (int i = 0; i &lt; edge_num; i++)
	{
		int u, v, w;
		scanf("%d%d%d", &amp;u, &amp;v, &amp;w);
		v--;
		u--;
		edge[u].push_back(make_pair(v, w));
		edge[v].push_back(make_pair(u, w));
	}
	fill(dist, dist + node_num, INF);
	fill(train, train + node_num, false);
	for (int i = 0; i &lt; route_num; i++)
	{
		int v, w;
		scanf("%d%d", &amp;v, &amp;w);
		v--;
		dist[v] = min(dist[v], (long long)w);
		train[v] = true;
	}
}

priority_queue&lt;pair&lt;long long, int&gt; &gt; pq;

void dijkstra(int source)
{
	dist[source] = 0;
	pq.push(make_pair(0LL, 0));
	for (int i = 0; i &lt; node_num; i++)
		if (train[i])
		{
			pq.push(make_pair(-dist[i], i));
		}
	while (!pq.empty())
	{
		int u = pq.top().second;
		long long w = -pq.top().first;
		pq.pop();
		if (dist[u] != w)
			continue;
		for (int i = 0; i &lt; (int)edge[u].size(); i++)
		{
			int v = edge[u][i].first;
			long long new_w = edge[u][i].second + w;
			if (dist[v] &gt;= new_w &amp;&amp; train[v])
			{
				train[v] = false;
			}
			if (dist[v] &gt; new_w)
			{
				dist[v] = new_w;
				pq.push(make_pair(-dist[v], v));
			}
		}
	}
}

int work()
{
	int ret = route_num;
	for (int i = 0; i &lt; node_num; i++)
	{
		if (train[i])
		{
			ret--;
		}
	}
	return ret;
}

int main()
{
	input();
	dijkstra(0);
	printf("%d\n", work());
	return 0;
}
</code></pre></div></div>


		</div>
                <hr>



		<!-- Disqus -->
		<!-- Comment -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'jhfjhfj1'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<!-- End Nested Comment -->



            </div>
            <!-- Blog Sidebar Widgets Column -->
            <div class="col-md-4" id="side_bar">
		<div><p></p></div>
<!-- Side Widget Well -->
<div class="card">
  <div class="card-header"><big>Introduction</big></div>
  <div class="card-body">
    <p>Here are some write-ups for the competitive programming problems I solved.</p>
  </div>
</div>

<div><p></p></div>
<div class="card">
  <div class="card-header"><big>Code Library</big></div>
  <div class="card-body">

    <p>My <a href="https://github.com/jhfjhfj1/codelib">code library link</a> on GitHub.</p>
  </div>
</div>

            </div>


        </div>
        <!-- /.row -->


    </div>
    <!-- /.container -->



    <hr>


    <!-- Google Analytics -->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44322747-2', 'auto');
  ga('send', 'pageview');

</script>


</body>

</html>
