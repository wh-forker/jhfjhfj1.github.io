<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Leetcode 4</title>

    <!-- Bootstrap Core  -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <link href="/css/clean-blog.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.plate.js"></script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<!-- Navigation -->
<div class="navbar navbar-default navbar-fixed-top" id="nav_bar">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/index.html"
            class="navbar-brand">
                Haifeng Jin's Blog
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="/index.html">
                        Home
                    </a>
                </li>
                <li>
                    <a href="/technology/index.html">
                        Technology
                    </a>
                </li>
                <li>
                    <a href="/codeforces/index.html">
                        Competitive
                    </a>
                </li>
                <li>
                    <a href="/chinese/index.html">
                        Chinese
                    </a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown">
                        Search
                        <b class="caret">
                        </b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <form class="navbar-form" style="padding-bottom:35px">
                                <input type="text" name="search-key-words" class="form-control col-lg-8"
                                onkeydown="if(event.keyCode==13) googlesearch();" placeholder="Search">
                            </form>
                        </li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown">
                        Contact
                        <b class="caret">
                        </b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="https://www.linkedin.com/in/HaifengJin">
                                Linkedin
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/jhfjhfj1">
                                GitHub
                            </a>
                        </li>
                        <li>
                            <a href="mailto:jin@tamu.edu">
                                E-mail
                            </a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/people/Haifeng-Jin/100002510906960">
                                Facebook
                            </a>
                        </li>

                </li>
                <li>
                </li>
            </ul>
        </div>
    </div>
</div>
<script type="text/javascript">
    function googlesearch() {
        var key = document.getElementsByName("search-key-words")[0].value;
        var link = "http://www.google.com/search?domains=haifengjin.com&sitesearch=haifengjin.com&q=" + key;
        window.open(link);
        document.getElementsByName("search-key-words")[0].value = ""
    }
</script>

    <div id="listener-contained" class="listener pointer">
<style>
</style>
<header class="intro-header" id="header" style="background-image: url('/img/codeforces.jpg')"> 
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">

		<div id="plate-contained" class="plate">
                        <h1>Tutorial</h1>
                        <hr class="small">
                        <span class="subheading">The Art of Competitive Programming</span>
</div>

                    </div>
                </div>
            </div>
        </div>

</header>
    </div>
        <script>
            $('#listener-contained').plate({
                element: ['#plate-contained']
            });
        </script>

		    <div class="container">

    <div class="row">
            <!-- Blog Post Content Column -->
            <div class="col-lg-8">

                <!-- Blog Post -->

                <!-- Title -->
		
                <h2>Leetcode 4</h2>
                <hr>

                <!-- Date/Time -->
		<div class="glyphicon glyphicon-time"></div>
		<span>
			&nbsp;
			Posted on 21 Feb 2017
		</span>

		<div class="pull-right">
			
			<span class="label label-default">binary search</span>
			
		</div>

                <hr>

                <!-- Post Content -->
		<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

		<div style="font-size: 16px; line-height: 26px">
		<h3 id="problem-link"><a href="https://leetcode.com/problems/median-of-two-sorted-arrays/">Problem Link</a></h3>
<p><br /></p>

<h3 id="tutorial">Tutorial</h3>
<p><br />
First, I thought binary search the median value <script type="math/tex">t</script>, and every time see if there is correct number of items less than <script type="math/tex">t</script> altogether in both arrays.
However, it involves another two binary searches to locate the position of <script type="math/tex">t</script> in both arrays, within the binary search of <script type="math/tex">t</script>,
It make the complexity rise to <script type="math/tex">O(log(log(n+m)))</script>.</p>

<p>The best way is to binary search a divide position in the longer array.
Imagine, we divide the two arrays into 4 halves, all the elements in the left two halves are less than the right two halves, this division would help us locate the median.
Every time we have a divide position in the longer array, we can directly calculate where to divide in the second array, since the total number of elements in the left halves should equal to that of the right halves.
Then, we check whether this division is valid, by comparing the right most elements in the left halves and the left most elements in the right halves.
The complexity is <script type="math/tex">O(log(m+n))</script>.
<br /></p>

<h3 id="solution">Solution</h3>
<p><br /></p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Solution(object):
    def findMedianSortedArrays(self, nums1, nums2):
        """
        :type nums1: List[int]
        :type nums2: List[int]
        :rtype: float
        """
        if len(nums1) &lt; len(nums2):
            nums1, nums2 = nums2, nums1

        self.n = len(nums1) + len(nums2)

        if not nums2:
            return (nums1[(self.n + 1) / 2 - 1] + nums1[self.n / 2]) / 2.0

        l = 0
        r = len(nums1)
        while l &lt; r:
            mid = (l + r) / 2
            if self.ok(mid, nums1, nums2):
                r = mid
            else:
                l = mid + 1
        l1, r1 = self.get_lr(nums1, l)
        l2, r2 = self.get_lr(nums2, self.n / 2 - l)
        if self.n % 2 == 1:
            return min(r1, r2)
        return (max(l1, l2) + min(r1, r2)) / 2.0
        
        
    def ok(self, a, nums1, nums2):
        b = self.n / 2 - a
        if b &gt; len(nums2):
            return False
        if b &lt; 0:
            return True
        l1, r1 = self.get_lr(nums1, a)
        l2, r2 = self.get_lr(nums2, b)
        if l2 &gt; r1:
            return False
        return True


    def get_lr(self, nums, n):
        l = nums[n - 1] if n != 0 else -float('inf')
        r = nums[n] if n != len(nums) else float('inf')
        return l, r
</code></pre>
</div>


		</div>
                <hr>



		<!-- Disqus -->
		<!-- Comment -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'jhfjhfj1'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<!-- End Nested Comment -->



            </div>
            <!-- Blog Sidebar Widgets Column -->
            <div class="col-md-4" id="side_bar">

            </div>


        </div>
        <!-- /.row -->


    </div>
    <!-- /.container -->




    <hr>


    <!-- Google Analytics -->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44322747-2', 'auto');
  ga('send', 'pageview');

</script>

    
</body>

</html>
